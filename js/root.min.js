var root=window.root||{},functionBinder=function(a,b){"use strict";return function(){return a.apply(b,arguments)}};root.Carousel=function(){"use strict";function a(a,b){var c={autoplay:!1,autoplaySpeed:2e3,dots:!1,arrows:!0,infinite:!0,speed:500,swipable:!0};this.currentSlide=0,this.currentLeft=null,this.dots=null,this.nextArrow=null,this.prevArrow=null,this.slideCount=null,this.sliderWidth=null,this.slideTrack=null,this.slides=null,this.sliding=!1,this.slideOffset=0,this.slider=$(a),this.list=null,this.touchObject={},this.options=$.extend({},c,b),this.changeSlide=functionBinder(this.changeSlide,this),this.setPosition=functionBinder(this.setPosition,this),this.swipeHandler=functionBinder(this.swipeHandler,this),this.init()}return a.prototype.init=function(){$(this.slider).hasClass("sliderInitialized")||($(this.slider).addClass("sliderInitialized"),this.setValues(),this.buildOut(),this.setPosition(),this.intializeEvents(),this.startLoad())},a.prototype.startLoad=function(){this.list.find("img").css("opacity",0),this.options.arrows===!0&&(this.prevArrow.hide(),this.nextArrow.hide()),this.options.dots===!0&&this.dots.hide(),this.slider.addClass("bt-loading")},a.prototype.stopLoad=function(){this.list.find("img").animate({opacity:1},this.options.speed),this.options.arrows===!0&&(this.prevArrow.show(),this.nextArrow.show()),this.options.dots===!0&&this.dots.show(),this.slider.removeClass("bt-loading")},a.prototype.setValues=function(){this.list=this.slider.find("ul:first").addClass("bt-list"),this.sliderWidth=this.list.width(),this.slides=$("li:not(.cloned)",this.list).addClass("slide"),this.slideCount=this.slides.length},a.prototype.buildOut=function(){var a;if(this.slider.addClass("bt-slider"),this.slideTrack=this.slides.wrapAll('<div class="bt-track"/>').parent(),this.options.arrows===!0&&(this.prevArrow=$('<a href="javascript:void(0)">Previous</a>').appendTo(this.slider).addClass("bt-prev"),this.nextArrow=$('<a href="javascript:void(0)">Next</a>').appendTo(this.slider).addClass("bt-next"),this.options.infinite!==!0&&this.prevArrow.addClass("disabled")),this.options.dots===!0){for(this.dots=$('<ul class="bt-dots"></ul>').appendTo(this.slider),a=1;this.slideCount>=a;a+=1)$('<li><a href="javascript:void(0)">'+a+"</a></li>").appendTo(this.dots);this.dots.find("li").first().addClass("active")}this.options.infinite===!0&&(this.slides.first().clone().appendTo(this.slideTrack).addClass("cloned"),this.slides.last().clone().prependTo(this.slideTrack).addClass("cloned"))},a.prototype.setDimensions=function(){this.list.find("li").width(this.sliderWidth),this.slideTrack.width(this.sliderWidth*this.slider.find("li").length)},a.prototype.setPosition=function(){this.setValues(),this.setDimensions(),this.options.infinite===!0&&(this.slideOffset=-1*this.sliderWidth);var a=-1*this.currentSlide*this.sliderWidth+this.slideOffset;this.slideTrack.css("left",a)},a.prototype.intializeEvents=function(){var a=this;this.options.arrows===!0&&(this.prevArrow.on("click",{message:"previous"},this.changeSlide),this.nextArrow.on("click",{message:"next"},this.changeSlide)),this.options.dots===!0&&$("li a",this.dots).on("click",{message:"index"},this.changeSlide),this.options.swipable===!0&&(this.slider.on("touchstart",{action:"start"},this.swipeHandler),this.slider.on("touchmove",{action:"move"},this.swipeHandler),this.slider.on("touchend",{action:"end"},this.swipeHandler)),$(window).on("resize",this.setPosition),this.list.find("img").load(function(){a.stopLoad()})},a.prototype.changeSlide=function(a){switch(a.data.message){case"previous":this.slideHandler(this.currentSlide-1);break;case"next":this.slideHandler(this.currentSlide+1);break;case"index":this.slideHandler($(a.target).parent().index());break;default:return!1}},a.prototype.updateDots=function(){this.dots.find("li").removeClass("active"),$(this.dots.find("li").get(this.currentSlide)).addClass("active")},a.prototype.slideHandler=function(a){var b,c=null,d=this;if(b=a,c=-1*b*this.sliderWidth+this.slideOffset,0>b){if(this.options.infinite!==!0)return!1;this.slideTrack.animate({left:c},d.options.speed,function(){d.currentSlide=d.slideCount-1,d.setPosition(),d.options.dots&&d.updateDots()})}else if(b>this.slideCount-1){if(this.options.infinite!==!0)return!1;this.slideTrack.animate({left:c},d.options.speed,function(){d.currentSlide=0,d.setPosition(),d.options.dots&&d.updateDots()})}else this.slideTrack.animate({left:c},d.options.speed,function(){d.currentSlide=b,d.options.dots&&d.updateDots(),d.options.arrows===!0&&d.options.infinite!==!0&&(0===d.currentSlide?d.prevArrow.addClass("disabled"):d.currentSlide===d.slideCount-1?d.nextArrow.addClass("disabled"):(d.prevArrow.removeClass("disabled"),d.nextArrow.removeClass("disabled")))})},a.prototype.swipeHandler=function(a){var b,c=null;switch(b=-1*this.currentSlide*this.sliderWidth+this.slideOffset,a.originalEvent.preventDefault(),this.touchObject.fingerCount=a.originalEvent.touches.length,this.touchObject.minSwipe=this.sliderWidth/4,a.data.action){case"start":1===this.touchObject.fingerCount?(this.touchObject.startX=a.originalEvent.touches[0].pageX,this.touchObject.startY=a.originalEvent.touches[0].pageY):this.touchObject={};break;case"move":1===a.originalEvent.touches.length?(this.touchObject.curX=a.originalEvent.touches[0].pageX,this.touchObject.curY=a.originalEvent.touches[0].pageY,this.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(this.touchObject.curX-this.touchObject.startX,2))),this.touchObject.curX>this.touchObject.startX?(c=b+this.touchObject.swipeLength,this.slideTrack.css("left",c)):(c=b-this.touchObject.swipeLength,this.slideTrack.css("left",c))):this.touchObject={};break;case"end":if(0===this.touchObject.fingerCount&&0!==this.touchObject.curX)if(this.touchObject.swipeLength>=this.touchObject.minSwipe)switch(this.swipeDirection()){case"left":this.slideHandler(this.currentSlide+1);break;case"right":this.slideHandler(this.currentSlide-1)}else this.slideHandler(this.currentSlide);else this.touchObject={};break;case"cancel":}},a.prototype.swipeDirection=function(){var a,b,c,d;return a=this.touchObject.startX-this.touchObject.curX,b=this.touchObject.startY-this.touchObject.curY,c=Math.atan2(b,a),d=Math.round(180*c/Math.PI),0>d&&(d=360-Math.abs(d)),45>=d&&d>=0?"left":360>=d&&d>=315?"left":d>=135&&225>=d?"right":void 0},a}(),$.fn.carousel=function(a){"use strict";var b=[];return this.each(function(c){b[c]=new root.Carousel(this,a)})};